# =========================================================
# Telegram AI Bot 环境配置文件
# =========================================================
# 使用说明:
# 1. 复制此文件为 .env: cp env.example .env
# 2. 根据您的需求填写相关配置
# 3. 对于敏感信息，请确保不要将 .env 文件提交到版本控制系统
# =========================================================

# =========================================================
# 环境选择 - 核心配置
# =========================================================
# 设置为 'local' 使用本地数据库和Redis，设置为 'cloud' 使用云服务
# 此设置决定了应用程序使用哪组连接配置
ENVIRONMENT=cloud

# =========================================================
# Telegram Bot 配置
# =========================================================
# 从 BotFather 获取的 Telegram Bot Token
TELEGRAM_BOT_TOKEN=your_bot_token_here

# 管理员用户ID列表，格式为JSON数组，这些用户将有权访问管理功能
# 可以通过与 @userinfobot 对话获取您的用户ID
TELEGRAM_ADMIN_IDS=[123456789,987654321]

# =========================================================
# 数据库配置
# =========================================================

# ----- Aiven PostgreSQL 配置 (当 ENVIRONMENT=cloud 时使用) -----
# Aiven PostgreSQL 主机地址
AIVEN_PG_HOST=your-aiven-postgres-host.aivencloud.com
# Aiven PostgreSQL 端口
AIVEN_PG_PORT=12345
# Aiven PostgreSQL 数据库名称
AIVEN_PG_DATABASE=defaultdb
# Aiven PostgreSQL 用户名
AIVEN_PG_USER=avnadmin
# Aiven PostgreSQL 密码
AIVEN_PG_PASSWORD=your-aiven-postgres-password

# ----- 本地 PostgreSQL 配置 (当 ENVIRONMENT=local 时使用) -----
# 本地 PostgreSQL 主机地址 (使用容器名称作为主机名)
LOCAL_PG_HOST=postgres
# 本地 PostgreSQL 端口
LOCAL_PG_PORT=5432
# 本地 PostgreSQL 数据库名称
LOCAL_PG_DATABASE=telegram_ai_bot
# 本地 PostgreSQL 用户名
LOCAL_PG_USER=user
# 本地 PostgreSQL 密码
LOCAL_PG_PASSWORD=password

# ----- 数据库连接池配置 -----
# 数据库连接池大小
DATABASE_POOL_SIZE=10
# 数据库连接池最大溢出连接数
DATABASE_MAX_OVERFLOW=20

# =========================================================
# Redis 配置
# =========================================================

# ----- Upstash Redis 配置 (当 ENVIRONMENT=cloud 时使用) -----
# Upstash Redis 主机地址
UPSTASH_REDIS_HOST=your-upstash-redis-host.upstash.io
# Upstash Redis 端口
UPSTASH_REDIS_PORT=12345
# Upstash Redis 用户名
UPSTASH_REDIS_USER=default
# Upstash Redis 密码
UPSTASH_REDIS_PASSWORD=your-upstash-redis-password

# ----- 本地 Redis 配置 (当 ENVIRONMENT=local 时使用) -----
# 本地 Redis 主机地址 (使用容器名称作为主机名)
LOCAL_REDIS_HOST=redis
# 本地 Redis 端口
LOCAL_REDIS_PORT=6379

# ----- Redis 连接池配置 -----
# Redis 最大连接数
REDIS_MAX_CONNECTIONS=20

# =========================================================
# 安全配置
# =========================================================
# 32字符加密密钥，用于敏感数据加密
# 可以使用以下命令生成: openssl rand -hex 16
ENCRYPTION_KEY=your_32_character_encryption_key_here

# =========================================================
# AI 模型配置
# =========================================================
# 注意: 这些是可选的，机器人已预配置自定义API
# 如果您想使用自己的API密钥，请取消注释并填写

# OpenAI API密钥
# OPENAI_API_KEY=your_openai_api_key_here

# Anthropic API密钥
# ANTHROPIC_API_KEY=your_anthropic_api_key_here

# Google API密钥
# GOOGLE_API_KEY=your_google_api_key_here

# =========================================================
# 自定义 API 配置
# =========================================================
# 是否启用自定义API
ENABLE_CUSTOM_APIS=true

# 自定义API配置，JSON格式
# 格式示例: [{"name":"api1","url":"https://api1.example.com","key":"key1"},{"name":"api2","url":"https://api2.example.com","key":"key2"}]
CUSTOM_API_CONFIGS=

# =========================================================
# 速率限制配置
# =========================================================
# 全局请求速率限制（每分钟请求数）
RATE_LIMIT_GLOBAL=100

# 每用户请求速率限制（每分钟请求数）
RATE_LIMIT_USER=10

# 速率限制窗口时间（秒）
RATE_LIMIT_WINDOW=60

# =========================================================
# 上下文管理配置
# =========================================================
# 每个对话保留的最大消息数
CONTEXT_MAX_MESSAGES=20

# 上下文生存时间（秒）
CONTEXT_TTL=900

# =========================================================
# 日志配置
# =========================================================
# 日志级别: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# 日志格式: json, text
LOG_FORMAT=json

# =========================================================
# 应用程序配置
# =========================================================
# 是否启用调试模式
# 生产环境建议设置为false，开发环境可设置为true
DEBUG=false

# 应用程序监听主机
HOST=0.0.0.0

# 应用程序监听端口
PORT=8000

# =========================================================
# 高级配置 (可选)
# =========================================================
# 以下是一些高级配置，通常不需要修改

# 最大请求超时时间（秒）
# REQUEST_TIMEOUT=30

# 数据库迁移自动运行
# AUTO_MIGRATE=true

# 启用性能分析
# ENABLE_PROFILING=false

# 性能分析采样率 (0-1)
# PROFILING_SAMPLE_RATE=0.1